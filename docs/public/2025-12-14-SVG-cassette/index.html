<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Cassette Player</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="app">
      <section class="stage" aria-label="Cassette player">
        <div class="cassette-wrap" role="img" aria-label="Animated cassette tape">
          <svg id="cassetteSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024">
            <defs>
              <style>
                .outer { fill: none; stroke: #0f172a; stroke-width: 6; stroke-linecap: round; stroke-linejoin: round; shape-rendering: geometricPrecision; }
                .inner { fill: none; stroke: #0f172a; stroke-width: 4; stroke-linecap: round; stroke-linejoin: round; shape-rendering: geometricPrecision; }
                .detail { fill: none; stroke: #0f172a; stroke-width: 3; stroke-linecap: round; stroke-linejoin: round; shape-rendering: geometricPrecision; }
                .fine  { fill: none; stroke: #0f172a; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; shape-rendering: geometricPrecision; }
              </style>

              <g id="screw">
                <circle class="inner" cx="0" cy="0" r="18"/>
                <circle class="fine"  cx="0" cy="0" r="9"/>
              </g>

              <g id="reelLinework">
                <circle class="inner" cx="0" cy="0" r="60"/>
                <circle class="fine"  cx="0" cy="0" r="52"/>
                <circle class="inner" cx="0" cy="0" r="26"/>
                <path class="detail" d="M 0 -20 L 7 -12.1 L 17.3 -10 L 14 0 L 17.3 10 L 7 12.1 L 0 20 L -7 12.1 L -17.3 10 L -14 0 L -17.3 -10 L -7 -12.1 Z"/>
                <circle class="fine" cx="0" cy="0" r="10"/>
              </g>

              <linearGradient id="shellGrad" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#f8fafc"/>
                <stop offset="1" stop-color="#e2e8f0"/>
              </linearGradient>

              <linearGradient id="labelGrad" x1="0" y1="0" x2="1" y2="0">
                <stop offset="0" stop-color="#fff7ed"/>
                <stop offset="1" stop-color="#ffedd5"/>
              </linearGradient>

              <linearGradient id="windowGrad" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0" stop-color="#0b1220"/>
                <stop offset="1" stop-color="#111827"/>
              </linearGradient>

              <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
                <feDropShadow dx="0" dy="10" stdDeviation="12" flood-color="#000" flood-opacity="0.25"/>
              </filter>
            </defs>

            <rect x="0" y="0" width="1024" height="1024" fill="transparent"/>

            <g id="cassette" filter="url(#softShadow)">
              <!-- Outer shell (filled) -->
              <rect x="60" y="193" width="903" height="576" rx="36" ry="36" fill="url(#shellGrad)" stroke="#0f172a" stroke-width="6"/>

              <!-- Side tabs -->
              <rect x="46" y="525" width="18" height="160" rx="9" ry="9" fill="#cbd5e1" stroke="#0f172a" stroke-width="4"/>
              <rect x="960" y="525" width="18" height="160" rx="9" ry="9" fill="#cbd5e1" stroke="#0f172a" stroke-width="4"/>

              <!-- Corner screws -->
              <g transform="translate(99 221)"><use href="#screw"/></g>
              <g transform="translate(923 221)"><use href="#screw"/></g>
              <g transform="translate(99 740)"><use href="#screw"/></g>
              <g transform="translate(923 740)"><use href="#screw"/></g>

              <!-- Label panel frames -->
              <path d="M 138 233 L 886 233 L 910 257 L 910 604 L 886 628 L 138 628 L 114 604 L 114 257 Z" fill="url(#labelGrad)" stroke="#0f172a" stroke-width="4" stroke-linejoin="round"/>
              <path class="fine" d="M 144 244 L 879 244 L 899 264 L 899 597 L 879 617 L 144 617 L 124 597 L 124 264 Z"/>

              <!-- Label lines -->
              <line class="fine" x1="180" y1="303" x2="855" y2="303"/>
              <line class="fine" x1="180" y1="350" x2="854" y2="350"/>
              <line class="fine" x1="220" y1="388" x2="804" y2="388"/>

              <!-- Seam lines -->
              <line class="inner" x1="60" y1="614" x2="963" y2="614"/>
              <line class="fine"  x1="60" y1="624" x2="963" y2="624"/>

              <!-- Main cassette window capsule (filled) -->
              <rect x="249" y="386" width="526" height="145" rx="72" ry="72" fill="url(#windowGrad)" stroke="#0f172a" stroke-width="4"/>
              <rect x="261" y="398" width="502" height="121" rx="60" ry="60" fill="#0b1220" stroke="#0f172a" stroke-width="2"/>

              <!-- Tape amount circles behind reels (animated radii) -->
              <circle id="tapeLeftFill"  cx="320" cy="459" r="46" fill="#7c2d12" opacity="0.55"/>
              <circle id="tapeRightFill" cx="704" cy="459" r="30" fill="#7c2d12" opacity="0.55"/>

              <!-- Reels (rotating) -->
              <g id="reelL" transform="translate(320 459)">
                <g id="reelLRot">
                  <use href="#reelLinework"/>
                </g>
              </g>
              <g id="reelR" transform="translate(704 459)">
                <g id="reelRRot">
                  <use href="#reelLinework"/>
                </g>
              </g>

              <!-- Center tape window (filled) -->
              <rect x="420" y="406" width="184" height="95" rx="10" ry="10" fill="#111827" stroke="#0f172a" stroke-width="4"/>
              <rect x="428" y="414" width="168" height="79" rx="8" ry="8" fill="#0b1220" stroke="#0f172a" stroke-width="2"/>

              <!-- Tape lines inside center window (animated dash offset) -->
              <path id="tapeTop" class="fine" d="M 440 420 C 470 438, 485 440, 512 440 C 540 440, 555 438, 584 420" stroke="#fde68a" opacity="0.9" stroke-dasharray="10 14"/>
              <path id="tapeBottom" class="fine" d="M 440 492 C 470 474, 485 472, 512 472 C 540 472, 555 474, 584 492" stroke="#fde68a" opacity="0.9" stroke-dasharray="10 14"/>
              <line id="tapeMid" class="fine" x1="440" y1="457" x2="584" y2="457" stroke="#a3e635" opacity="0.9" stroke-dasharray="8 10"/>

              <!-- Tick marks -->
              <line class="fine" x1="472" y1="457" x2="472" y2="468"/>
              <line class="fine" x1="496" y1="457" x2="496" y2="466"/>
              <line class="detail" x1="512" y1="457" x2="512" y2="476"/>
              <line class="fine" x1="528" y1="457" x2="528" y2="466"/>
              <line class="fine" x1="552" y1="457" x2="552" y2="468"/>

              <!-- Bottom trapezoid panel (filled) -->
              <path d="M 234 638 L 788 638 L 819 766 L 204 766 Z" fill="#e5e7eb" stroke="#0f172a" stroke-width="4" stroke-linejoin="round"/>
              <path d="M 246 650 L 776 650 L 807 754 L 216 754 Z" fill="none" stroke="#0f172a" stroke-width="2" stroke-linejoin="round"/>

              <!-- Bottom panel center screw -->
              <g transform="translate(511 681)">
                <circle class="inner" cx="0" cy="0" r="18"/>
                <circle class="fine"  cx="0" cy="0" r="9"/>
              </g>

              <!-- Bottom panel holes -->
              <circle class="inner" cx="295" cy="737" r="22"/>
              <circle class="inner" cx="728" cy="737" r="22"/>
              <rect class="inner" x="368" y="705" width="38" height="34" rx="5" ry="5"/>
              <rect class="inner" x="618" y="705" width="38" height="34" rx="5" ry="5"/>

              <!-- Status LED -->
              <circle id="statusLed" cx="860" cy="676" r="10" fill="#94a3b8" stroke="#0f172a" stroke-width="2"/>
            </g>
          </svg>
        </div>

        <div class="panel" role="group" aria-label="Playback controls">
          <div class="panel-top">
            <div class="title">
              <div class="brand">Cassette</div>
              <div class="subtitle" id="modeText">Stopped</div>
            </div>
            <div class="time" aria-label="Playback time">
              <span id="timeText">00:00</span>
              <span class="sep">/</span>
              <span id="durText">03:30</span>
            </div>
          </div>

          <div class="scrub">
            <input id="scrub" type="range" min="0" max="1000" value="0" aria-label="Scrub timeline" />
            <div class="scrub-fill" aria-hidden="true"><div id="scrubFillInner"></div></div>
          </div>

          <div class="controls">
            <button class="btn" id="rewBtn" type="button" aria-label="Rewind">
              <span class="icon"><<</span>
            </button>
            <button class="btn primary" id="playBtn" type="button" aria-label="Play">
              <span class="icon" id="playIcon">></span>
            </button>
            <button class="btn" id="stopBtn" type="button" aria-label="Stop">
              <span class="icon">[]</span>
            </button>
            <button class="btn" id="ffBtn" type="button" aria-label="Fast forward">
              <span class="icon">>></span>
            </button>
          </div>

          <div class="hint" id="hintText">Space: play/pause, R: rewind, F: fast forward, S: stop</div>
        </div>
      </section>
    </main>

    <script src="./app.js"></script>
  </body>
</html>
