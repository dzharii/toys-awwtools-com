<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Put a thought in my head</title>
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/character.css" />
    <link rel="stylesheet" href="css/ui.css" />
  </head>
  <body>
    <main class="page">
      <header class="header">
        <h1 class="title">Put a thought in my head</h1>
        <p class="subtitle">I have… nothing in there. Fix me.</p>
      </header>

      <section class="toy" aria-label="Brain toy">
        <svg
          id="brainToySvg"
          class="toy-svg"
          viewBox="0 0 800 520"
          role="img"
          aria-label="A cartoon side-profile head with a hollow cavity."
        >
          <defs>
            <linearGradient id="bgGrad" x1="0" x2="0" y1="0" y2="1">
              <stop offset="0" stop-color="#fbfbff" />
              <stop offset="1" stop-color="#f0f6ff" />
            </linearGradient>
            <linearGradient id="cavityGrad" x1="0" x2="1" y1="0" y2="1">
              <stop offset="0" stop-color="#ffffff" stop-opacity="0.9" />
              <stop offset="1" stop-color="#dfe7ff" stop-opacity="0.95" />
            </linearGradient>
            <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="6" stdDeviation="6" flood-opacity="0.2" />
            </filter>
          </defs>

          <rect x="0" y="0" width="800" height="520" rx="34" fill="url(#bgGrad)" />

          <g id="characterRig" filter="url(#softShadow)">
            <!-- Neck / body -->
            <path
              id="neckShape"
              d="M235,392 C252,438 286,478 346,494 C420,514 504,494 566,454 C610,426 636,392 650,362
                 C595,372 548,364 514,344 C478,322 454,288 444,246 C431,190 454,140 500,102
                 C458,84 398,86 348,112 C302,136 272,176 262,222 C252,268 248,300 242,330
                 C236,356 228,374 214,382 C206,386 212,390 235,392 Z"
              class="skin stroke"
            />

            <!-- Head silhouette -->
            <path
              id="headShape"
              d="M520,96
                 C460,48 346,58 282,126
                 C230,180 214,252 224,314
                 C234,376 276,424 328,444
                 C396,470 498,454 564,394
                 C620,344 644,286 642,226
                 C640,162 602,120 520,96 Z"
              class="skin stroke"
            />

            <path
              id="headHighlight"
              d="M510,120
                 C458,88 372,92 320,146
                 C284,184 274,232 280,266
                 C300,224 336,198 392,188
                 C444,180 494,188 538,214
                 C572,234 598,260 612,292
                 C624,224 596,162 510,120 Z"
              class="skin-highlight"
            />

            <!-- Face bits -->
            <path
              id="nose"
              d="M258,232 C236,226 224,236 230,252 C238,272 262,280 278,268"
              class="stroke line"
            />
            <path
              id="mouth"
              d="M270,310 C290,330 326,334 354,318"
              class="stroke line"
            />
            <path
              id="ear"
              d="M352,250 C336,254 328,270 334,286 C340,300 356,304 366,294"
              class="stroke line ear"
            />

            <!-- Eye -->
            <g id="eyeGroup" transform="translate(0 0)">
              <ellipse id="eyeWhite" cx="312" cy="232" rx="26" ry="18" class="eye stroke" />
              <circle id="pupil" cx="320" cy="235" r="7" class="pupil" />
              <path d="M292,214 C310,202 340,204 352,220" class="stroke brow" />
            </g>

            <!-- Cavity interior shape (used by JS for clipping) -->
            <path
              id="cavityPath"
              d="M512,128
                 C584,154 618,220 606,286
                 C594,350 538,400 468,398
                 C420,396 382,372 356,336
                 C330,300 318,252 332,212
                 C350,162 404,120 466,118
                 C488,118 502,122 512,128 Z"
              class="cavity-fill"
            />

            <!-- Brain layers will be injected here -->
            <g id="brainHost"></g>

            <!-- Rim drawn above brain text -->
            <g id="skullRim">
              <path
                d="M512,128
                   C584,154 618,220 606,286
                   C594,350 538,400 468,398
                   C420,396 382,372 356,336
                   C330,300 318,252 332,212
                   C350,162 404,120 466,118
                   C488,118 502,122 512,128 Z"
                class="rim-bone"
              />
              <path
                d="M512,128
                   C584,154 618,220 606,286
                   C594,350 538,400 468,398
                   C420,396 382,372 356,336
                   C330,300 318,252 332,212
                   C350,162 404,120 466,118
                   C488,118 502,122 512,128 Z"
                class="rim stroke"
              />
              <path
                d="M510,140
                   C572,164 600,222 590,278
                   C580,334 532,376 474,374"
                class="rim-highlight"
              />
            </g>
          </g>
        </svg>
      </section>

      <section class="editor" aria-label="Thought input">
        <div class="editor-row">
          <label class="label" for="thoughtInput">Load brain cells:</label>
          <div class="toggles">
            <label class="toggle">
              <input id="wiggleToggle" type="checkbox" />
              wiggle mode
            </label>
            <label class="toggle">
              <input id="reducedMotionToggle" type="checkbox" />
              reduced motion
            </label>
          </div>
        </div>

        <textarea
          id="thoughtInput"
          class="input"
          rows="3"
          placeholder="Type a URL, a reminder, a tiny prophecy…"
          autocomplete="off"
          spellcheck="false"
        ></textarea>

        <div class="meter" aria-label="Brain occupancy">
          <div class="meter-label">
            <span>Brain occupancy</span>
            <span id="occupancyPct" class="meter-pct">0%</span>
          </div>
          <div id="occupancyBar" class="meter-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100">
            <div id="occupancyFill" class="meter-fill"></div>
          </div>
          <p id="emptyHint" class="hint">Hint: try typing just one letter.</p>
          <p id="errorBox" class="error" hidden></p>
        </div>
      </section>
    </main>

    <script src="js/00-namespace.js" defer></script>
    <script src="js/01-dom.js" defer></script>
    <script src="js/02-scene.js" defer></script>
    <script src="js/03-anim-character.js" defer></script>
    <script src="js/04-ui-input.js" defer></script>
    <script src="js/05-geometry.js" defer></script>
    <script src="js/06-pathgen.js" defer></script>
    <script src="js/07-text-layout.js" defer></script>
    <script src="js/08-render-brain.js" defer></script>
    <script src="js/09-scheduler.js" defer></script>
    <script src="js/10-debug.js" defer></script>
    <script src="js/99-bootstrap.js" defer></script>
  </body>
</html>
