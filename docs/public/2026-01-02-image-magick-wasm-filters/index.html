<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ImageMagick WASM Filters Playground</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="page">
      <header class="hero">
        <div class="hero-top">
          <p class="eyebrow">Offline image laboratory</p>
          <h1>ImageMagick WASM Filters Playground</h1>
          <p class="hero-sub">
            Load a single photo from your computer and explore a catalog of focused, independent ImageMagick widgets.
            Every card renders its own preview, runs off the main thread, and publishes a ready-to-copy CLI command.
          </p>
        </div>
        <div class="hero-actions">
          <button class="ghost" id="reset-all" type="button">Reset all widgets</button>
          <span class="status-pill" id="runtime-status">Initializing WASM...</span>
        </div>
      </header>

      <section class="ingest" aria-label="Image ingestion">
        <div class="drop-zone" id="drop-zone" tabindex="0" role="button" aria-label="Drop image here or choose a file">
          <div>
            <h2>Drop an image here</h2>
            <p>Or pick a file. All processing stays on this machine.</p>
          </div>
        </div>
        <div class="picker">
          <label class="file-label" for="file-input">Choose an image</label>
          <input id="file-input" type="file" accept="image/png,image/jpeg,image/webp" />
          <p class="helper" id="ingest-message">Supported: PNG, JPEG, WebP.</p>
        </div>
      </section>

      <section class="source" aria-label="Source preview">
        <div class="section-title">
          <h2>Source preview</h2>
          <p class="muted">This is the immutable source used by every widget.</p>
        </div>
        <div class="source-content">
          <div class="preview-frame" id="source-frame">
            <div class="placeholder">Load an image to begin.</div>
            <img id="source-image" alt="Source preview" />
          </div>
          <div class="source-meta" id="source-meta">
            <div class="meta-row"><span>Dimensions</span><strong id="meta-dimensions">--</strong></div>
            <div class="meta-row"><span>Megapixels</span><strong id="meta-megapixels">--</strong></div>
            <div class="meta-row"><span>File size</span><strong id="meta-bytes">--</strong></div>
            <div class="meta-row"><span>File name</span><strong id="meta-name">--</strong></div>
          </div>
        </div>
      </section>

      <section class="catalog" aria-label="Widget catalog">
        <div class="section-title">
          <h2>Widget catalog</h2>
          <p class="muted">Each widget has its own parameters, preview, command line, and download.</p>
        </div>
        <div class="catalog-grid" id="widget-catalog"></div>
      </section>

      <details class="diagnostics" id="diagnostics">
        <summary>Diagnostics</summary>
        <div class="diag-grid">
          <div>
            <h3>Runtime</h3>
            <div class="diag-row"><span>WASM</span><strong id="diag-wasm">Loading</strong></div>
            <div class="diag-row"><span>Worker</span><strong id="diag-worker">Starting</strong></div>
            <div class="diag-row"><span>Last error</span><strong id="diag-error">None</strong></div>
          </div>
          <div>
            <h3>Job log</h3>
            <pre id="diag-log" class="diag-log">Waiting for jobs...</pre>
          </div>
        </div>
      </details>
    </div>

    <script type="module" src="app.js"></script>
  </body>
</html>
